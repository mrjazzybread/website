<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Emacs configuration</title>
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" href="https://cdn.simplecss.org/simple.min.css" />
</head>
<body>
<div id="content" class="content">
<h1 class="title">Emacs configuration</h1>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(load-file <span style="font-style: italic;">"~/.config/sensitive.el"</span>)
</pre>
</div>
<div id="outline-container-org991e070" class="outline-2">
<h2 id="org991e070">Package Configuration</h2>
<div class="outline-text-2" id="text-org991e070">
<p>
Add MELPA to the list of recognized archives
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">package</span>)
(add-to-list 'package-archives
             '(<span style="font-style: italic;">"melpa"</span> . <span style="font-style: italic;">"https://melpa.org/packages/"</span>) t)
</pre>
</div>
<p>
Installs use-package if I don't have it already and enables verbose
messages
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">unless</span> (package-installed-p 'use-package)
(package-install 'use-package))

(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">use-package</span>)
(<span style="font-weight: bold;">setq</span> use-package-verbose t)
</pre>
</div>
<p>
Updates the local cache if it is missing
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">unless</span> package-archive-contents
  (package-refresh-contents))
</pre>
</div>
<p>
Use-package always installs packages
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> use-package-always-ensure t)
</pre>
</div>
<p>
Install <code>quelpa</code>
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">use-package</span> quelpa)
</pre>
</div>
<p>
GNU keys to enable downloading packages
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">use-package</span> gnu-elpa-keyring-update)
</pre>
</div>
</div>
</div>
<div id="outline-container-org128281a" class="outline-2">
<h2 id="org128281a">Some Miscellaneous Configurations</h2>
<div class="outline-text-2" id="text-org128281a">
<p>
enable creation of pairs of brackets or quotes when one is inserted.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> skeleton-pair t)
(<span style="font-weight: bold;">bind-key</span> <span style="font-style: italic;">"("</span> 'skeleton-pair-insert-maybe)
(<span style="font-weight: bold;">bind-key</span> <span style="font-style: italic;">"{"</span> 'skeleton-pair-insert-maybe)
(<span style="font-weight: bold;">bind-key</span> <span style="font-style: italic;">"["</span> 'skeleton-pair-insert-maybe)
(<span style="font-weight: bold;">bind-key</span> (char-to-string 34) 'skeleton-pair-insert-maybe)
<span style="font-weight: bold; font-style: italic;">;</span><span style="font-weight: bold; font-style: italic;">char 34 is the single quote, putting the character itself
</span><span style="font-weight: bold; font-style: italic;">;</span><span style="font-weight: bold; font-style: italic;">ruins prettify symbols mode</span>
</pre>
</div>
<p>
Enable Emacs to track changes made to files by different programs.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(global-auto-revert-mode 1)
</pre>
</div>
<p>
Allows me to see the column number as well as the line number.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(column-number-mode)
</pre>
</div>
<p>
Bookmarks are preserved throughout different sessions
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> bookmark-save-flag 0)
</pre>
</div>
<p>
Keybindings for navigating functions
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">bind-key</span> <span style="font-style: italic;">"C-M-p"</span> #'beginning-of-defun)
(<span style="font-weight: bold;">bind-key</span> <span style="font-style: italic;">"C-M-n"</span> #'end-of-defun)
</pre>
</div>
<p>
Better scroll
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">when</span> (display-graphic-p)
  (<span style="font-weight: bold;">setq</span> mouse-wheel-scroll-amount '(2 ((shift) . 1))
        mouse-wheel-progressive-speed nil))
</pre>
</div>
<p>
opens files at the last visited location
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(save-place-mode 1)
</pre>
</div>
<p>
don't use ui dialogs
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> use-dialog-box nil)
</pre>
</div>
<p>
Keybinding for quickly evaluating <code>elisp</code> code
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-hook 'lisp-interaction-mode-hook
          (<span style="font-weight: bold;">lambda</span> () (local-set-key
                      (kbd <span style="font-style: italic;">"C-c C-c"</span>) #'eval-region)))
</pre>
</div>
<p>
Suppress annoying message any time you start a new frame
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> server-client-instructions nil)
</pre>
</div>
<p>
Enable <code>recentf</code> mode to remember recently opened files
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(recentf-mode 1)
(<span style="font-weight: bold;">setq</span> recentf-max-saved-items 10000)
(add-to-list 'recentf-exclude
           (<span style="font-weight: bold;">lambda</span> (s) (cl-search <span style="font-style: italic;">"/test/"</span> s)))
(add-to-list 'recentf-exclude
           (<span style="font-weight: bold;">lambda</span> (s) (cl-search <span style="font-style: italic;">"/tmp/"</span> s)))
</pre>
</div>
<p>
Keybindings for splitting a window instead clones the frame
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(bind-key "C-x 3" #'clone-frame)
</span><span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(bind-key "C-x 2" #'clone-frame)</span>
</pre>
</div>
<p>
Every time a file is visited, update the list of recently visited
files.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-hook 'find-file-hook 'recentf-save-list)
</pre>
</div>
<p>
Add binding to go to previous and next buffer.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(winner-mode)
(global-set-key <span style="font-style: italic;">"\C-xp"</span> 'winner-undo)
(global-set-key <span style="font-style: italic;">"\C-xn"</span> 'winner-redo)
</pre>
</div>
<p>
Set scratch buffer major mode to <code>org-mode</code>
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> initial-major-mode 'org-mode)
(<span style="font-weight: bold;">setq</span> initial-scratch-message <span style="font-style: italic;">""</span>)
</pre>
</div>
<p>
Delete trailing white spaces after saving a file.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-hook 'before-save-hook
          'delete-trailing-whitespace)
</pre>
</div>
<p>
Multiple cursors
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">use-package</span> multiple-cursors)
(global-set-key (kbd <span style="font-style: italic;">"C-&gt;"</span>) 'mc/mark-next-like-this)
(global-set-key (kbd <span style="font-style: italic;">"C-&lt;"</span>) 'mc/mark-previous-like-this)
(global-set-key (kbd <span style="font-style: italic;">"C-c C-&lt;"</span>) 'mc/mark-all-like-this)
(global-set-key (kbd <span style="font-style: italic;">"C-x x SPC"</span>) 'set-rectangular-region-anchor)
</pre>
</div>
<p>
Yanking a string replaces the current selection
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(delete-selection-mode 1)
</pre>
</div>
<p>
Gospel thing
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">  (<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">gospel-header</span> ()
    (<span style="font-weight: bold;">interactive</span>)
    (insert <span style="font-style: italic;">"(**************************************************************************)
(*                                                                        *)
(*  GOSPEL -- A Specification Language for OCaml                          *)
(*                                                                        *)
(*  Copyright (c) 2018- The VOCaL Project                                 *)
(*                                                                        *)
(*  This software is free software, distributed under the MIT license     *)
(*  (as described in file LICENSE enclosed).                              *)
(**************************************************************************)
"</span>))
</pre>
</div>
<p>
Key binding for returning to the beginning of the line ignores
indentation
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(global-set-key (kbd <span style="font-style: italic;">"C-a"</span>) #'back-to-indentation)
</pre>
</div>
<p>
Markdown windows are viewed without markup, similar to org mode
visualisation.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> markdown-hide-markup t)
</pre>
</div>
</div>
<div id="outline-container-org0b7126d" class="outline-3">
<h3 id="org0b7126d"><code>utf-8</code></h3>
<div class="outline-text-3" id="text-org0b7126d">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(prefer-coding-system       'utf-8)
(set-default-coding-systems 'utf-8)
(set-terminal-coding-system 'utf-8)
(set-keyboard-coding-system 'utf-8)
(<span style="font-weight: bold;">setq</span> default-buffer-file-coding-system 'utf-8)
(set-language-environment 'utf-8)
(set-selection-coding-system 'utf-8)
(<span style="font-weight: bold;">setq</span> x-select-request-type '(UTF8_STRING COMPOUND_TEXT TEXT STRING))

</pre>
</div>
</div>
</div>
<div id="outline-container-orga85e39b" class="outline-3">
<h3 id="orga85e39b">Backup files</h3>
<div class="outline-text-3" id="text-orga85e39b">
<p>
Ensures that backups and auto-saves go to a separate directory instead
of stinking up the working directory.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">backup-dir</span> (expand-file-name <span style="font-style: italic;">"~/.emacs.d/backup/"</span>))
(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">autosave-dir</span> (expand-file-name <span style="font-style: italic;">"~/.emacs.d/autosave/"</span>))
(<span style="font-weight: bold;">setq</span> backup-directory-alist (list (cons <span style="font-style: italic;">".*"</span> backup-dir)))
(<span style="font-weight: bold;">setq</span> auto-save-list-file-prefix autosave-dir)
(<span style="font-weight: bold;">setq</span> auto-save-file-name-transforms `((<span style="font-style: italic;">".*"</span> ,autosave-dir t)))
</pre>
</div>
</div>
</div>
<div id="outline-container-org3b84090" class="outline-3">
<h3 id="org3b84090">Miscellaneous Packages</h3>
<div class="outline-text-3" id="text-org3b84090">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">use-package</span> pacmacs)
(<span style="font-weight: bold;">use-package</span> fireplace)
(<span style="font-weight: bold;">use-package</span> mingus)
(<span style="font-weight: bold;">use-package</span> bluetooth)
(<span style="font-weight: bold;">use-package</span> trashed)
(<span style="font-weight: bold;">use-package</span> browse-kill-ring)
(global-set-key <span style="font-style: italic;">"\C-cy"</span> #'browse-kill-ring)

(<span style="font-weight: bold;">use-package</span> avy
  <span style="font-weight: bold;">:custom</span> (avy-timeout-seconds 0.3))
(<span style="font-weight: bold;">bind-key</span> <span style="font-style: italic;">"M-j"</span> 'avy-goto-char-timer)

(<span style="font-weight: bold;">use-package</span> exec-path-from-shell)
(<span style="font-weight: bold;">when</span> (daemonp)
  (exec-path-from-shell-initialize))
</pre>
</div>
</div>
</div>
<div id="outline-container-orgb8ff158" class="outline-3">
<h3 id="orgb8ff158">Repeat mode</h3>
<div class="outline-text-3" id="text-orgb8ff158">
<p>
This allows me to easily switch to another buffer using "p" and "n"
when I have already used a buffer navigation command.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(repeat-mode 1)

(<span style="font-weight: bold;">setq</span> winner-repeat-map
      (<span style="font-weight: bold;">let</span> ((map (make-sparse-keymap)))
      (define-key map (kbd <span style="font-style: italic;">"p"</span>) 'winner-undo)
        (define-key map (kbd <span style="font-style: italic;">"n"</span>) 'winner-redo)
      map))

</pre>
</div>
<p>
Disable repeat mode in Dired
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> dired-jump-map nil)
</pre>
</div>
</div>
</div>
<div id="outline-container-org0d1083e" class="outline-3">
<h3 id="org0d1083e">Popup windows</h3>
<div class="outline-text-3" id="text-org0d1083e">
<p>
I use the <code>shackle</code> package to control the behaviour of pop up windows.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="font-weight: bold; font-style: italic;">;</span><span style="font-weight: bold; font-style: italic;">(use-package shackle)
</span>(<span style="font-weight: bold;">setq</span> shackle-select-reused-windows t)
(<span style="font-weight: bold;">setq</span> shackle-rules
      '((<span style="font-style: italic;">"*compilation*"</span> <span style="font-weight: bold;">:same</span> t)
      ('magit-status-mode <span style="font-weight: bold;">:same</span> t)))
(<span style="font-weight: bold;">setq</span> shackle-inhibit-window-quit-on-same-windows t)
<span style="font-weight: bold; font-style: italic;">;</span><span style="font-weight: bold; font-style: italic;">(shackle-mode 1)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org5f187bc" class="outline-3">
<h3 id="org5f187bc">GPG</h3>
<div class="outline-text-3" id="text-org5f187bc">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">let's get encryption established
</span>(<span style="font-weight: bold;">use-package</span> pinentry)
(setenv <span style="font-style: italic;">"GPG_AGENT_INFO"</span> nil)  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">use emacs pinentry
</span>(<span style="font-weight: bold;">setq</span> auth-source-debug t)

(<span style="font-weight: bold;">setq</span> epg-gpg-program <span style="font-style: italic;">"gpg2"</span>)  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">not necessary
</span>(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">epa-file</span>)
(epa-file-enable)
(<span style="font-weight: bold;">setq</span> epa-pinentry-mode 'loopback)
(<span style="font-weight: bold;">setq</span> epg-pinentry-mode 'loopback)
(pinentry-start)

(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">org-crypt</span>)
(org-crypt-use-before-save-magic)

(<span style="font-weight: bold;">setq</span> epa-file-encrypt-to email1)
(<span style="font-weight: bold;">setq</span> epa-file-select-keys 1)
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orge93f554" class="outline-2">
<h2 id="orge93f554">Coding Packages</h2>
<div class="outline-text-2" id="text-orge93f554">
</div>
<div id="outline-container-orga8eda61" class="outline-3">
<h3 id="orga8eda61"><code>Flymake</code></h3>
<div class="outline-text-3" id="text-orga8eda61">
<p>
Package used by Eglot for highlighting errors
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">use-package</span> flymake
  <span style="font-weight: bold;">:bind</span> (<span style="font-weight: bold;">:map</span> flymake-mode-map
         (<span style="font-style: italic;">"\C-c \C-x"</span> . flymake-goto-next-error))
  <span style="font-weight: bold;">:hook</span> (prog-mode . flymake-mode)
  )
</pre>
</div>
</div>
</div>
<div id="outline-container-orgeae7d14" class="outline-3">
<h3 id="orgeae7d14">Company</h3>
<div class="outline-text-3" id="text-orgeae7d14">
<p>
Package for completion suggestions
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">
(<span style="font-weight: bold;">use-package</span> company)
(global-company-mode 1)
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(use-package corfu
</span><span style="font-weight: bold; font-style: italic;">;;   </span><span style="font-weight: bold; font-style: italic;">:custom (corfu-auto t))
</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(global-corfu-mode 1)
</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(use-package nerd-icons-corfu)
</span><span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(add-to-list 'corfu-margin-formatters #'nerd-icons-corfu-formatter)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org768d3f8" class="outline-3">
<h3 id="org768d3f8">OCaml packages</h3>
<div class="outline-text-3" id="text-org768d3f8">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">ocaml-compile</span> ()
  (<span style="font-weight: bold;">setq</span> compile-command <span style="font-style: italic;">"~/.config/ocompile.sh"</span>)
  )

(<span style="font-weight: bold;">use-package</span> tuareg
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">changes the default compile command
</span>  <span style="font-weight: bold;">:hook</span> (tuareg-mode . ocaml-compile)
  <span style="font-weight: bold;">:hook</span> (tuareg-mode . flycheck-mode))

(<span style="font-weight: bold;">use-package</span> ocamlformat
  <span style="font-weight: bold;">:custom</span> (ocamlformat-enable 'enable-outside-detected-project)
  <span style="font-weight: bold;">:custom</span> (ocamlformat-show-errors nil)
  <span style="font-weight: bold;">:hook</span> (before-save . ocamlformat-before-save))

(<span style="font-weight: bold;">use-package</span> dune)
</pre>
</div>
</div>
</div>
<div id="outline-container-org002f227" class="outline-3">
<h3 id="org002f227">Rust packages</h3>
<div class="outline-text-3" id="text-org002f227">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">use-package</span> rustic
  <span style="font-weight: bold;">:config</span> (<span style="font-weight: bold;">setq</span> rustic-lsp-client #'eglot))
</pre>
</div>
</div>
</div>
<div id="outline-container-org4a6d2bb" class="outline-3">
<h3 id="org4a6d2bb"><code>Eglot</code></h3>
<div class="outline-text-3" id="text-org4a6d2bb">
<p>
Package for language servers
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">lsp-no-coq</span> ()
  (<span style="font-weight: bold;">interactive</span>)
  (<span style="font-weight: bold;">unless</span> (eq major-mode 'coq-mode) (eglot-ensure)))

(<span style="font-weight: bold;">use-package</span> eglot
    <span style="font-weight: bold;">:hook</span> (prog-mode . lsp-no-coq))
</pre>
</div>
<p>
Neat eldoc popup
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">use-package</span> eldoc-box
  <span style="font-weight: bold;">:custom</span> (eldoc-box-only-multi-line t))

(<span style="font-weight: bold;">bind-key</span> <span style="font-style: italic;">"\C-hj"</span> #'eldoc-box-help-at-point)
</pre>
</div>
</div>
</div>
<div id="outline-container-org114b20e" class="outline-3">
<h3 id="org114b20e">Git packages</h3>
<div class="outline-text-3" id="text-org114b20e">
<p>
I will always use <code>magit</code> though. <code>magit</code> :)
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">use-package</span> magit
  <span style="font-weight: bold;">:bind</span> (<span style="font-weight: bold;">:map</span> magit-mode-map
              (<span style="font-style: italic;">"C-c C-p"</span> . magit-section-up)))

(<span style="font-weight: bold;">setq</span> magit-display-buffer-function
      #'magit-display-buffer-traditional)

(<span style="font-weight: bold;">setq</span> magit-bury-buffer-function
      'magit-restore-window-configuration)

(<span style="font-weight: bold;">bind-key</span> <span style="font-style: italic;">"C-x g"</span> #'magit-status)
</pre>
</div>
</div>
</div>
<div id="outline-container-org0fb3a76" class="outline-3">
<h3 id="org0fb3a76">Miscellaneous Coding Packages</h3>
<div class="outline-text-3" id="text-org0fb3a76">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">use-package</span> yaml-mode)
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org1e61bd3" class="outline-2">
<h2 id="org1e61bd3"><code>Dired</code></h2>
<div class="outline-text-2" id="text-org1e61bd3">
<p>
Deleted files are moved to the trash folder
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> delete-by-moving-to-trash t)
</pre>
</div>
<p>
Start <code>Dired</code> in omit mode
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-hook 'dired-mode-hook #'dired-omit-mode)
</pre>
</div>
<p>
Bind the "o" key to show hidden files
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-hook 'dired-mode-hook
          (<span style="font-weight: bold;">lambda</span> () (local-set-key
                      (kbd <span style="font-style: italic;">"o"</span>) #'dired-omit-mode)))
</pre>
</div>
<p>
Bind the "b" key to move up in the directory
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-hook 'dired-mode-hook
          (<span style="font-weight: bold;">lambda</span> () (local-set-key
                      (kbd <span style="font-style: italic;">"b"</span>) #'dired-up-directory)))
</pre>
</div>
<p>
Set files to omit
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> dired-omit-files
      (<span style="font-weight: bold;">rx</span> (<span style="font-weight: bold;">or</span> (seq bol (? <span style="font-style: italic;">"."</span>) <span style="font-style: italic;">"#"</span>)     <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">emacs autosave files
</span>              (seq bol <span style="font-style: italic;">"."</span>) <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">dot-files
</span>              (seq <span style="font-style: italic;">"~"</span> eol)                 <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">backup-files
</span>              (seq bol <span style="font-style: italic;">"CVS"</span> eol)           <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">CVS dirs
</span>            (seq bol <span style="font-style: italic;">"CVS"</span> eol)           <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">CVS dirs
</span>              ))
      )
(<span style="font-weight: bold;">setq</span> dired-omit-files
      (concat dired-omit-files <span style="font-style: italic;">"</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">|</span><span style="font-style: italic;">\\.gpg$"</span>)) <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">encrypted files</span>
</pre>
</div>
<p>
Make it so <code>Dired</code> buffers are just a list of file names.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-hook 'dired-mode-hook
          (<span style="font-weight: bold;">lambda</span> () (dired-hide-details-mode 1)))
</pre>
</div>
<p>
Icons for <code>Dired</code> mode.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"> <span style="font-weight: bold; font-style: italic;">;</span><span style="font-weight: bold; font-style: italic;">This package requires additional fonts
</span>(<span style="font-weight: bold;">use-package</span> all-the-icons-dired
  <span style="font-weight: bold;">:hook</span> (dired-mode . all-the-icons-dired-mode))
</pre>
</div>
<p>
Kill <code>Dired</code> buffer when opening a new <code>Dired</code> buffer.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> dired-kill-when-opening-new-dired-buffer t)
</pre>
</div>
<p>
Dired buffers update when there is a change in one of the files in the
directory
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> global-auto-revert-non-file-buffers t)
</pre>
</div>
<p>
Keeps track of visited <code>Dired</code> buffers
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">use-package</span> dired-hist)
(define-key dired-mode-map <span style="font-style: italic;">"l"</span> #'dired-hist-go-back)
(define-key dired-mode-map <span style="font-style: italic;">"r"</span> #'dired-hist-go-forward)
(dired-hist-mode 1)
</pre>
</div>
<p>
More convenient way to search through sub-directories.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">use-package</span> dired-subtree
  <span style="font-weight: bold;">:bind</span> (<span style="font-weight: bold;">:map</span> dired-mode-map
        (<span style="font-style: italic;">"i"</span> . dired-subtree-insert)
        (<span style="font-style: italic;">"DEL"</span> . dired-subtree-remove)))
</pre>
</div>
<p>
Disable "Omit N files" message
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> dired-omit-verbose nil)
</pre>
</div>
<p>
Quickly browse files in read only mode
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">view-browse</span> (f)

  (<span style="font-weight: bold;">let</span> ((b (current-buffer)))
    (dired-jump)
    (<span style="font-weight: bold;">condition-case</span> nil
      ((<span style="font-weight: bold;">lambda</span> () (funcall f)
         (dired-find-file)
         (kill-buffer b)
         (view-mode)))
      (<span style="font-weight: bold;">error</span>
       (<span style="font-weight: bold;">progn</span> (switch-to-buffer b)
            (message <span style="font-style: italic;">"No more files in current directory"</span>))))))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">view-next-file</span> ()
  (<span style="font-weight: bold;">interactive</span>)
  (view-browse (<span style="font-weight: bold;">lambda</span> () (dired-next-line 1))))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">view-previous-file</span> ()
  (<span style="font-weight: bold;">interactive</span>)
  (view-browse (<span style="font-weight: bold;">lambda</span> () (dired-previous-line 1)))
  )

<span style="font-weight: bold; font-style: italic;">;</span><span style="font-weight: bold; font-style: italic;">(define-key view-mode-map (kbd "n") 'view-next-file)
</span><span style="font-weight: bold; font-style: italic;">;</span><span style="font-weight: bold; font-style: italic;">(define-key view-mode-map (kbd "p") 'view-previous-file)</span>
</pre>
</div>
<p>
Change <code>ls</code> switches to use human readable file sizes and to list
directories first.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> dired-listing-switches <span style="font-style: italic;">"-alh --group-directories-first"</span>)
</pre>
</div>
<p>
When copying a file, have it so if there is another dired buffer open in
another window in the same frame, it selects that buffer by default
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> dired-dwim-target t)
</pre>
</div>
</div>
</div>
<div id="outline-container-org59f50e5" class="outline-2">
<h2 id="org59f50e5">Org</h2>
<div class="outline-text-2" id="text-org59f50e5">
</div>
<div id="outline-container-org8bad5bc" class="outline-3">
<h3 id="org8bad5bc">Some Basic Bookkeeping</h3>
<div class="outline-text-3" id="text-org8bad5bc">
<p>
Some helpful variables
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">org-directory</span> (file)
  (concat <span style="font-style: italic;">"~/roam/daily/personal/"</span> file))

(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">todo-file</span>
  (org-directory <span style="font-style: italic;">"todo.org.gpg"</span>))

(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">agenda-file</span>
  (org-directory <span style="font-style: italic;">"appoint.org.gpg"</span>))
</pre>
</div>
<p>
My agenda files:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> org-agenda-file-regexp <span style="font-style: italic;">"\\`[</span><span style="font-style: italic;">^</span><span style="font-style: italic;">.].*\\.org\</span><span style="font-weight: bold; font-style: italic;">\</span><span style="font-weight: bold; font-style: italic;">\</span><span style="font-weight: bold; font-style: italic;">(</span><span style="font-style: italic;">\\.gpg\</span><span style="font-weight: bold; font-style: italic;">\</span><span style="font-weight: bold; font-style: italic;">\</span><span style="font-weight: bold; font-style: italic;">)</span><span style="font-style: italic;">?\\'"</span>)
(<span style="font-weight: bold;">setq</span> org-agenda-files (list (org-directory <span style="font-style: italic;">""</span>)))
</pre>
</div>
<p>
Settings for exporting Org files with citations to TeX.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">  (<span style="font-weight: bold;">setq</span> org-cite-export-processors '((t biblatex <span style="font-style: italic;">"numeric"</span> <span style="font-style: italic;">"numeric"</span>)))
<span style="font-weight: bold; font-style: italic;">;  </span><span style="font-weight: bold; font-style: italic;">(setq org-cite-global-bibliography '("~/org/org.bib"))
</span>  (<span style="font-weight: bold;">setq</span> org-export-with-sub-superscripts nil)
</pre>
</div>
<p>
Enable notifications for Org agenda items
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">use-package</span> org-alert
  <span style="font-weight: bold;">:custom</span> (alert-default-style 'libnotify)
  <span style="font-weight: bold;">:custom</span> (org-alert-interval 300)
  <span style="font-weight: bold;">:custom</span> (org-alert-notify-cutoff 10)
  <span style="font-weight: bold;">:custom</span> (org-alert-notify-after-event-cutoff 0)
  )
(org-alert-enable)
</pre>
</div>
<p>
Add menu item to list only items with a <code>TODO</code> keyword.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> org-agenda-custom-commands
      '((<span style="font-style: italic;">"t"</span> <span style="font-style: italic;">"List all items with the TODO keyword"</span> ((todo <span style="font-style: italic;">"TODO"</span>)))))
</pre>
</div>
<p>
This is very important
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">what</span> ()
  (<span style="font-weight: bold;">interactive</span>)
  (insert <span style="font-style: italic;">"&#128065;&#65039;&#128068;&#128065;&#65039;"</span>)
  )
</pre>
</div>
</div>
</div>
<div id="outline-container-org3d8588c" class="outline-3">
<h3 id="org3d8588c">Appearance</h3>
<div class="outline-text-3" id="text-org3d8588c">
<p>
Hide emphasis markers and macro braces
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> org-hide-emphasis-markers t)
(<span style="font-weight: bold;">setq</span> org-hide-macro-markers t)
</pre>
</div>
<p>
Make it there is only one star visible in each heading.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> org-hide-leading-stars t)
</pre>
</div>
<p>
Use LaTeX like syntax to insert special symbols
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> org-pretty-entities t)
</pre>
</div>
<p>
Start Org files with each heading folded.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> org-startup-folded t)
</pre>
</div>
<p>
Enable Org indentation
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> org-startup-indented t)
</pre>
</div>
<p>
Centre Org agenda
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-hook 'org-agenda-mode-hook #'writeroom-mode)
</pre>
</div>
<p>
Don't show items that are marked as done.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> org-agenda-skip-timestamp-if-done t
      org-agenda-skip-deadline-if-done t
      org-agenda-skip-scheduled-if-done t
      org-agenda-skip-scheduled-if-deadline-is-shown t
      org-agenda-skip-timestamp-if-deadline-is-shown t)
</pre>
</div>
<p>
Automatic latex preview in Org mode
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> org-startup-with-latex-preview t)

(<span style="font-weight: bold;">use-package</span> org-fragtog
  <span style="font-weight: bold;">:hook</span> (org-mode . org-fragtog-mode))
</pre>
</div>
<p>
Scale up latex preview in Org mode
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> org-format-latex-options
      (plist-put org-format-latex-options <span style="font-weight: bold;">:scale</span> 3))
</pre>
</div>
<p>
Automatically converts strings to emojis
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">use-package</span> emojify)
</pre>
</div>
<p>
Org agenda takes up the full window
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> org-agenda-window-setup 'only-window)
</pre>
</div>
</div>
<div id="outline-container-org4ce6ac1" class="outline-4">
<h4 id="org4ce6ac1">Org Pretty Symbols</h4>
<div class="outline-text-4" id="text-org4ce6ac1">
<p>
Function for adding pretty symbols for Org mode. Most of these are
just so that Org mode environments aren't awful to look at.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Pretty Symbols for Org
</span>(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">add-symbols</span> ()
  (<span style="font-weight: bold;">push</span> '(<span style="font-style: italic;">"#+end_example"</span> . ? ) prettify-symbols-alist)
  (<span style="font-weight: bold;">push</span> '(<span style="font-style: italic;">"#+end_src"</span> . ? ) prettify-symbols-alist)
  (<span style="font-weight: bold;">push</span> '(<span style="font-style: italic;">"#+begin_example coq"</span> . ?&#128019;) prettify-symbols-alist)
  (<span style="font-weight: bold;">push</span> '(<span style="font-style: italic;">"#+begin_example ocaml"</span> . ?&#128043;) prettify-symbols-alist)
  (<span style="font-weight: bold;">push</span> '(<span style="font-style: italic;">"#+begin_src ocaml"</span> . ?&#128043;) prettify-symbols-alist)
  (<span style="font-weight: bold;">push</span> '(<span style="font-style: italic;">"#+begin_example ocaml :why3"</span> . ?&#10068;) prettify-symbols-alist)
  <span style="font-weight: bold; font-style: italic;">;;</span><span style="font-weight: bold; font-style: italic;">errrrrrm, what the ...
</span>  (<span style="font-weight: bold;">push</span> '(<span style="font-style: italic;">"#+begin_src emacs-lisp :results none"</span> . ?&#128511;) prettify-symbols-alist)
  (<span style="font-weight: bold;">push</span> '(<span style="font-style: italic;">"#+ATTR_LATEX: :environment cfml"</span> . ? ) prettify-symbols-alist)
  (<span style="font-weight: bold;">push</span> '(<span style="font-style: italic;">"#+ATTR_LATEX: :environment ocamlenv"</span> . ? ) prettify-symbols-alist)
  (<span style="font-weight: bold;">push</span> '(<span style="font-style: italic;">"#+ATTR_LATEX: :environment gospel"</span> . ? ) prettify-symbols-alist)
  (<span style="font-weight: bold;">push</span> '(<span style="font-style: italic;">"#+ATTR_LATEX: :environment whylang"</span> . ? ) prettify-symbols-alist)
  (<span style="font-weight: bold;">push</span> '(<span style="font-style: italic;">"-&gt;"</span> . ?&#8594;) prettify-symbols-alist)
  (<span style="font-weight: bold;">push</span> '(<span style="font-style: italic;">"&lt;-&gt;"</span> . ?&#8596;) prettify-symbols-alist)
  (<span style="font-weight: bold;">push</span> '(<span style="font-style: italic;">"|-"</span> . ?&#8866;) prettify-symbols-alist)
  (<span style="font-weight: bold;">push</span> '(<span style="font-style: italic;">"/\\"</span> . ?&#8743;) prettify-symbols-alist)
  (<span style="font-weight: bold;">push</span> '(<span style="font-style: italic;">"\\/"</span> . ?&#8744;) prettify-symbols-alist)
  (<span style="font-weight: bold;">push</span> '(<span style="font-style: italic;">"&lt;-"</span> . ?&#8592;) prettify-symbols-alist)
  (prettify-symbols-mode 1))
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org82ce376" class="outline-3">
<h3 id="org82ce376">Org capture templates</h3>
<div class="outline-text-3" id="text-org82ce376">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> org-capture-templates
      '(
        (<span style="font-style: italic;">"w"</span> <span style="font-style: italic;">"Writing TODO"</span>
         entry (file+headline todo-file <span style="font-style: italic;">"Writing"</span>)
         <span style="font-style: italic;">"* TODO %?\n "</span>
         <span style="font-weight: bold;">:empty-lines</span> 0)

        (<span style="font-style: italic;">"p"</span> <span style="font-style: italic;">"Phd TODO"</span>
         entry (file+headline todo-file <span style="font-style: italic;">"PhD Tasks"</span>)
         <span style="font-style: italic;">"* TODO [[%L][%?]]\n "</span>
         <span style="font-weight: bold;">:empty-lines</span> 0)

        (<span style="font-style: italic;">"a"</span> <span style="font-style: italic;">"Appointment"</span>
         entry (file+headline agenda-file <span style="font-style: italic;">"Appointments"</span>)
         <span style="font-style: italic;">"* APPOINTMENT %?\n "</span>
         <span style="font-weight: bold;">:empty-lines</span> 0)

        (<span style="font-style: italic;">"?"</span> <span style="font-style: italic;">"Question"</span>
         entry (file+headline todo-file <span style="font-style: italic;">"Questions"</span>)
         <span style="font-style: italic;">"* &#128065;&#65039;&#128068;&#128065;&#65039; %?\n "</span>
         <span style="font-weight: bold;">:empty-lines</span> 0)

        (<span style="font-style: italic;">"r"</span> <span style="font-style: italic;">"Reading"</span>
         checkitem (file+headline todo-file <span style="font-style: italic;">"Reading List"</span>)
         <span style="font-style: italic;">"[ ] %?\n"</span>)
      ))
</pre>
</div>
</div>
</div>
<div id="outline-container-org74382dd" class="outline-3">
<h3 id="org74382dd">Org Keywords</h3>
<div class="outline-text-3" id="text-org74382dd">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> org-todo-keywords
      '((sequence <span style="font-style: italic;">"APPOINTMENT(p)"</span> <span style="font-style: italic;">"TODO(t)"</span> <span style="font-style: italic;">"IN-PROGRESS(i@/!)"</span> <span style="font-style: italic;">"VERIFYING(v!)"</span> <span style="font-style: italic;">"BLOCKED(b@)"</span> <span style="font-style: italic;">"&#128065;&#65039;&#128068;&#128065;&#65039;(q)"</span> <span style="font-style: italic;">"|"</span> <span style="font-style: italic;">"DONE(d!)"</span> <span style="font-style: italic;">"OBE(o@!)"</span> <span style="font-style: italic;">"WONT-DO(w@/!)"</span> )
        ))
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">TODO colors
</span>(<span style="font-weight: bold;">setq</span> org-todo-keyword-faces
      '(
        (<span style="font-style: italic;">"TODO"</span> . (<span style="font-weight: bold;">:foreground</span> <span style="font-style: italic;">"GoldenRod"</span> <span style="font-weight: bold;">:weight</span> bold))
        (<span style="font-style: italic;">"APPOINTMENT"</span> . (<span style="font-weight: bold;">:foreground</span> <span style="font-style: italic;">"DeepPink"</span> <span style="font-weight: bold;">:weight</span> bold))
        (<span style="font-style: italic;">"IN-PROGRESS"</span> . (<span style="font-weight: bold;">:foreground</span> <span style="font-style: italic;">"Cyan"</span> <span style="font-weight: bold;">:weight</span> bold))
        (<span style="font-style: italic;">"VERIFYING"</span> . (<span style="font-weight: bold;">:foreground</span> <span style="font-style: italic;">"DarkOrange"</span> <span style="font-weight: bold;">:weight</span> bold))
        (<span style="font-style: italic;">"BLOCKED"</span> . (<span style="font-weight: bold;">:foreground</span> <span style="font-style: italic;">"Red"</span> <span style="font-weight: bold;">:weight</span> bold))
        (<span style="font-style: italic;">"DONE"</span> . (<span style="font-weight: bold;">:foreground</span> <span style="font-style: italic;">"LimeGreen"</span> <span style="font-weight: bold;">:weight</span> bold))
        (<span style="font-style: italic;">"WONT-DO"</span> . (<span style="font-weight: bold;">:foreground</span> <span style="font-style: italic;">"LimeGreen"</span> <span style="font-weight: bold;">:weight</span> bold))
        ))
</pre>
</div>
</div>
</div>
<div id="outline-container-orgbaabe59" class="outline-3">
<h3 id="orgbaabe59">Inserting Org Example Blocks</h3>
<div class="outline-text-3" id="text-orgbaabe59">
<p>
Function for wrapping text around a block
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">tag-word-or-region</span> (text-begin text-end)
<span style="font-style: italic;">"Surround current word or region with given text."</span>
(<span style="font-weight: bold;">interactive</span> <span style="font-style: italic;">"sStart tag: \nsEnd tag: "</span>)
(<span style="font-weight: bold;">let</span> (pos1 pos2 bds)
  (<span style="font-weight: bold;">if</span> (<span style="font-weight: bold;">and</span> transient-mark-mode mark-active)
      (<span style="font-weight: bold;">progn</span>
        (goto-char (region-end))
        (insert text-end)
        (goto-char (region-beginning))
        (insert text-begin))
    (<span style="font-weight: bold;">progn</span>
      (<span style="font-weight: bold;">setq</span> bds (point))
      (goto-char bds)
      (insert text-end)
      (goto-char bds)
      (insert text-begin)))))
</pre>
</div>
<p>
Associative list that maps environment names to programming languages
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> env-map '( (<span style="font-style: italic;">"cfml"</span> . <span style="font-style: italic;">"coq"</span>)
  (<span style="font-style: italic;">"ocamlenv"</span> . <span style="font-style: italic;">"ocaml"</span>)
  (<span style="font-style: italic;">"gospel"</span> . <span style="font-style: italic;">"ocaml"</span>)
  (<span style="font-style: italic;">"whylang"</span> . <span style="font-style: italic;">"ocaml :why3"</span>)
))
</pre>
</div>
<p>
Function to wrap text around an example block
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">org-insert-code-env</span> (env-name)
  (<span style="font-weight: bold;">interactive</span> <span style="font-style: italic;">"sEnvironment name: "</span>)
  (<span style="font-weight: bold;">if</span> (equal env-name <span style="font-style: italic;">"elisp"</span>)
      (tag-word-or-region
       <span style="font-style: italic;">"#+begin_src emacs-lisp :results none\n"</span>
       <span style="font-style: italic;">"\n#+end_src"</span>
       )
    (tag-word-or-region
     (concat <span style="font-style: italic;">"#+ATTR_LATEX: :environment "</span> env-name
                              <span style="font-style: italic;">"\n#+begin_example "</span> (alist-get env-name env-map nil nil #'equal) <span style="font-style: italic;">"\n"</span>)
                      <span style="font-style: italic;">"\n#+end_example"</span>
                      )))
</pre>
</div>
<p>
Function to insert a macro
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">org-insert-macro</span> ()
  (<span style="font-weight: bold;">interactive</span>)
  (tag-word-or-region <span style="font-style: italic;">"{{{"</span> <span style="font-style: italic;">"}}}"</span>) )
</pre>
</div>
</div>
</div>
<div id="outline-container-org3899cb8" class="outline-3">
<h3 id="org3899cb8">Remove Spell Checking in Code Blocks</h3>
<div class="outline-text-3" id="text-org3899cb8">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-to-list 'ispell-skip-region-alist '(<span style="font-style: italic;">"^#\\+BEGIN_SRC"</span> . <span style="font-style: italic;">"#\\+END_SRC"</span>))
(add-to-list 'ispell-skip-region-alist '(<span style="font-style: italic;">"^#\\+BEGIN_EXAMPLE"</span> . <span style="font-style: italic;">"#\\+END_EXAMPLE"</span>))
(add-to-list 'ispell-skip-region-alist '(<span style="font-style: italic;">"^#\\+begin_src"</span> . <span style="font-style: italic;">"#\\+end_src"</span>))
(add-to-list 'ispell-skip-region-alist '(<span style="font-style: italic;">"^#\\+begin_example"</span> . <span style="font-style: italic;">"#\\+end_example"</span>))
(add-to-list 'ispell-skip-region-alist '(<span style="font-style: italic;">"^#\\+"</span> . <span style="font-style: italic;">"\n"</span>))
(add-to-list 'ispell-skip-region-alist '(<span style="font-style: italic;">"~"</span> . <span style="font-style: italic;">"~"</span>))
(add-to-list 'ispell-skip-region-alist '(<span style="font-style: italic;">"/"</span> . <span style="font-style: italic;">"/"</span>))
(add-to-list 'ispell-skip-region-alist '(<span style="font-style: italic;">"{{{"</span> . <span style="font-style: italic;">"}}}"</span>))
(add-to-list 'ispell-skip-region-alist '(<span style="font-style: italic;">"&lt;&lt;"</span> . <span style="font-style: italic;">"&gt;&gt;"</span>))
</pre>
</div>
</div>
</div>
<div id="outline-container-org69e6bf3" class="outline-3">
<h3 id="org69e6bf3">Org Key Bindings and Hooks</h3>
<div class="outline-text-3" id="text-org69e6bf3">
<p>
Global key bindings to access and update the agenda.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(global-set-key <span style="font-style: italic;">"\C-ca"</span> 'org-agenda)
(global-set-key <span style="font-style: italic;">"\C-cc"</span> 'org-capture)
</pre>
</div>
<p>
Concise way of using the previous definitions to configure Org.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">use-package</span> org
  <span style="font-weight: bold;">:hook</span> (org-mode . add-symbols)
  <span style="font-weight: bold;">:bind</span>
  (<span style="font-weight: bold;">:map</span> org-mode-map
        (<span style="font-style: italic;">"C-c C-x C-x"</span> . org-insert-code-env))
  <span style="font-weight: bold;">:bind</span>
  (<span style="font-weight: bold;">:map</span> org-mode-map
        (<span style="font-style: italic;">"C-c C-x C-m"</span> . org-insert-macro))
  )
</pre>
</div>
</div>
</div>
<div id="outline-container-orge79e8c5" class="outline-3">
<h3 id="orge79e8c5">French Notes</h3>
<div class="outline-text-3" id="text-orge79e8c5">
<p>
Function for inserting a conjugation table for french verbs
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> conjugation-table
<span style="font-style: italic;">"|-----------+---|
| Je        |   |
|-----------+---|
| Tu        |   |
|-----------+---|
| Il/Elle   |   |
|-----------+---|
| Nous      |   |
|-----------+---|
| Vous      |   |
|-----------+---|
| Ils/Elles |   |
|-----------+---|"</span>)

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">start-conjugation</span> ()
  (<span style="font-weight: bold;">interactive</span>)
  (insert conjugation-table)
  (org-backward-paragraph)
  (org-cycle)
  (org-cycle))
</pre>
</div>
</div>
</div>
<div id="outline-container-orgec140da" class="outline-3">
<h3 id="orgec140da">LaTeX export</h3>
<div class="outline-text-3" id="text-orgec140da">
<p>
Add common scientific paper classes.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">with-eval-after-load</span> 'ox-latex
  (add-to-list 'org-latex-classes
               '(<span style="font-style: italic;">"llncs"</span>
                 <span style="font-style: italic;">"\\documentclass{llncs}"</span>
                 (<span style="font-style: italic;">"\\section{%s}"</span> . <span style="font-style: italic;">"\\section*{%s}"</span>)
                 (<span style="font-style: italic;">"\\subsection{%s}"</span> . <span style="font-style: italic;">"\\subsection*{%s}"</span>))))

(<span style="font-weight: bold;">with-eval-after-load</span> 'ox-latex
  (add-to-list 'org-latex-classes
               '(<span style="font-style: italic;">"IEEEtran"</span>
                 <span style="font-style: italic;">"\\documentclass{IEEEtran}"</span>
                 (<span style="font-style: italic;">"\\section{%s}"</span> . <span style="font-style: italic;">"\\section*{%s}"</span>)
                 (<span style="font-style: italic;">"\\subsection{%s}"</span> . <span style="font-style: italic;">"\\subsection*{%s}"</span>))))
</pre>
</div>
<p>
Function to create a latex project.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">latex-project</span> (title class)
  (<span style="font-weight: bold;">interactive</span> <span style="font-style: italic;">"sTitle: \nsClass: "</span>)
  (mkdir title)
  (cd title)
  (<span style="font-weight: bold;">let</span> ((d default-directory))
    (find-file <span style="font-style: italic;">"~/org/latex-templates/latex.org"</span>)
    (beginning-of-buffer)
    (<span style="font-weight: bold;">let</span> ((b (current-buffer)))
      (replace-string <span style="font-style: italic;">"?title"</span> title)
      (replace-string <span style="font-style: italic;">"?class"</span> class)
      (<span style="font-weight: bold;">if</span> (string= class <span style="font-style: italic;">"beamer"</span>)
          (org-beamer-export-as-latex)
        (org-latex-export-as-latex)
        )
      (<span style="font-weight: bold;">let</span> ((f (current-buffer)))
        (copy-file <span style="font-style: italic;">"config.tex"</span> d)
        (copy-file <span style="font-style: italic;">"Makefile"</span> d)
        (copy-file <span style="font-style: italic;">"mymacros.tex"</span> d)
        (copy-file <span style="font-style: italic;">"gospel.sty"</span> d)
        (copy-file <span style="font-style: italic;">"why3lang.sty"</span> d)
        (copy-file <span style="font-style: italic;">"lstcoq.sty"</span> d)
        (copy-file <span style="font-style: italic;">".gitignore"</span> d)
        (copy-file <span style="font-style: italic;">"bibliography.bib"</span> d)
        (<span style="font-weight: bold;">when</span> (<span style="font-weight: bold;">or</span> (string= class <span style="font-style: italic;">"llncs"</span>) (string= class <span style="font-style: italic;">"IEEEtran"</span>))
          (copy-file (concat class <span style="font-style: italic;">".cls"</span>) d))
        (write-file (concat d <span style="font-style: italic;">"/main.tex"</span>))
        (switch-to-buffer b)
        (set-buffer-modified-p nil)
        (kill-buffer b)
        (switch-to-buffer f)
        ))))
</pre>
</div>
<p>
Disable exporting with table of contents.
#+begin<sub>src</sub> emacs-lisp :results none
  (setq org-export-with-toc nil)
</p>
</div>
</div>

<div id="outline-container-org17921d4" class="outline-3">
<h3 id="org17921d4">Org Roam</h3>
<div class="outline-text-3" id="text-org17921d4">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">use-package</span> org-roam
    <span style="font-weight: bold;">:custom</span>
    (org-roam-directory (file-truename <span style="font-style: italic;">"~/roam"</span>))
    (org-roam-file-exclude-regexp '(<span style="font-style: italic;">"data/"</span> <span style="font-style: italic;">"daily/"</span>))
    (org-roam-completion-everywhere t)
    <span style="font-weight: bold;">:bind</span> ((<span style="font-style: italic;">"C-c n l"</span> . org-roam-buffer-toggle)
           (<span style="font-style: italic;">"C-c n f"</span> . org-roam-node-find)
           (<span style="font-style: italic;">"C-c n g"</span> . org-roam-graph)
           (<span style="font-style: italic;">"C-c n i"</span> . org-roam-node-insert)
           (<span style="font-style: italic;">"C-c n c"</span> . org-roam-capture)
           <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Dailies
</span>           (<span style="font-style: italic;">"C-c n j"</span> . org-roam-dailies-capture-today)))

(org-roam-db-autosync-mode)
</pre>
</div>
<p>
Capture templates for org roam.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> org-roam-capture-templates
      '((<span style="font-style: italic;">"t"</span> <span style="font-style: italic;">"travel"</span> plain
         <span style="font-style: italic;">"%?"</span>
         <span style="font-weight: bold;">:if-new</span> (file+head <span style="font-style: italic;">"travel/%&lt;%Y%m%d%H%M%S&gt;-${slug}.org"</span> <span style="font-style: italic;">"#+title: ${title}\n"</span>)
         <span style="font-weight: bold;">:unnarrowed</span> t)
      (<span style="font-style: italic;">"r"</span> <span style="font-style: italic;">"Reading note"</span> plain
       (file <span style="font-style: italic;">"~/roam/templates/reading_template.org"</span>)
       <span style="font-weight: bold;">:if-new</span> (file+head <span style="font-style: italic;">"research/%&lt;%Y%m%d%H%M%S&gt;-${slug}.org"</span> <span style="font-style: italic;">"#+title: ${title}\n"</span>)
       <span style="font-weight: bold;">:unnarrowed</span> t)
      (<span style="font-style: italic;">"p"</span> <span style="font-style: italic;">"PhD Note"</span> plain
         <span style="font-style: italic;">"%?"</span>
         <span style="font-weight: bold;">:if-new</span> (file+head <span style="font-style: italic;">"research/%&lt;%Y%m%d%H%M%S&gt;-${slug}.org"</span> <span style="font-style: italic;">"#+title: ${title}\n"</span>)
         <span style="font-weight: bold;">:unnarrowed</span> t)
      ))
</pre>
</div>
<p>
Capture template for org roam dailies
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> org-roam-dailies-capture-templates
      '((<span style="font-style: italic;">"d"</span> <span style="font-style: italic;">"default"</span> entry <span style="font-style: italic;">"* %?"</span> <span style="font-weight: bold;">:target</span> (file+head <span style="font-style: italic;">"%&lt;%Y-%m-%d&gt;.org.gpg"</span> <span style="font-style: italic;">"#+title: %&lt;%Y-%m-%d&gt;
"</span>))))
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgb0f9015" class="outline-2">
<h2 id="orgb0f9015">PDFs</h2>
<div class="outline-text-2" id="text-orgb0f9015">
<p>
Opens the current file in <code>zathura</code> and kills the Doc View buffer.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">zathura</span> ()
  (<span style="font-weight: bold;">when</span> (equal (file-name-extension (buffer-file-name)) <span style="font-style: italic;">"pdf"</span>)
  (start-process <span style="font-style: italic;">"zathura"</span> nil <span style="font-style: italic;">"zathura"</span> (buffer-file-name))
  (<span style="font-weight: bold;">let</span> ((b (current-buffer)))
    (add-to-list 'recentf-list (buffer-file-name))
    (recentf-save-list)
    (previous-buffer)
    (kill-buffer b)
  )))
</pre>
</div>
<p>
When we open a PDF in Emacs, open it in <code>zathura</code> instead.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(add-hook 'doc-view-mode-hook #'zathura)</span>
</pre>
</div>
<p>
When using pdf-tools, always use the minor mode for continuous scroll
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">
(<span style="font-weight: bold;">use-package</span> pdf-tools)
(pdf-tools-install)

(add-hook 'pdf-view-mode-hook #'pdf-view-roll-minor-mode)

(<span style="font-weight: bold;">use-package</span> pdf-view-restore
  <span style="font-weight: bold;">:hook</span> (pdf-view-mode . pdf-view-restore-mode))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">run-latex</span> ()
  (<span style="font-weight: bold;">interactive</span>)
  (async-shell-command
   <span style="font-style: italic;">"latexmk -pdf  -pdflatex='pdflatex -interaction=nonstopmode' -pvc --synctex=1 -use-make"</span>))
</pre>
</div>
</div>
</div>
<div id="outline-container-org4ff45d0" class="outline-2">
<h2 id="org4ff45d0">Proof General</h2>
<div class="outline-text-2" id="text-org4ff45d0">
<p>
Function for a more convenient Coq buffer split.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">split-proof-general</span> ()
  (<span style="font-weight: bold;">interactive</span>)
  (<span style="font-weight: bold;">let</span> ((f1 (selected-frame)) (f2 (clone-frame)))
    (select-frame f1)
    (delete-other-windows)
    (select-frame f2)
    (delete-window)
    (select-frame-set-input-focus f1) <span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">doesn't work! argh!
</span>    )
  )
</pre>
</div>
<p>
Package for working with Coq
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">use-package</span> proof-general
  <span style="font-weight: bold;">:bind</span> (<span style="font-weight: bold;">:map</span> coq-mode-map
              (<span style="font-style: italic;">"C-c C-k"</span> . split-proof-general))
  <span style="font-weight: bold;">:custom</span>
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">when starting a proof, splits windows so that the goals
</span>  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">window is larger than the response window
</span>  (proof-three-window-mode-policy 'hybrid)
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Removes the EXTREMELY annoying proof general splash screen
</span>  (proof-splash-enable nil))
</pre>
</div>
<p>
Weird arrow :/
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> overlay-arrow-string <span style="font-style: italic;">""</span>)
</pre>
</div>
</div>
<div id="outline-container-org48ec1a9" class="outline-3">
<h3 id="org48ec1a9">Unicode Symbols for Iris</h3>
<div class="outline-text-3" id="text-org48ec1a9">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Input of unicode symbols
</span>(<span style="font-weight: bold;">use-package</span> math-symbol-lists)
                                      <span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">Automatically use math input method for Coq files
</span>(add-hook 'coq-mode-hook (<span style="font-weight: bold;">lambda</span> () (set-input-method <span style="font-style: italic;">"math"</span>)))
                                      <span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">Input method for the minibuffer
</span><span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(defun my-inherit-input-method ()
</span><span style="font-weight: bold; font-style: italic;">;;   </span><span style="font-weight: bold; font-style: italic;">"Inherit input method from `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">minibuffer-selected-window</span><span style="font-weight: bold; font-style: italic;">'."
</span><span style="font-weight: bold; font-style: italic;">;;   </span><span style="font-weight: bold; font-style: italic;">(let* ((win (minibuffer-selected-window))
</span><span style="font-weight: bold; font-style: italic;">;;          </span><span style="font-weight: bold; font-style: italic;">(buf (and win (window-buffer win))))
</span><span style="font-weight: bold; font-style: italic;">;;     </span><span style="font-weight: bold; font-style: italic;">(when buf
</span><span style="font-weight: bold; font-style: italic;">;;       </span><span style="font-weight: bold; font-style: italic;">(activate-input-method (buffer-local-value 'current-input-method buf)))))
</span><span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(add-hook '
</span><span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">minibuffer-setup-hook #'my-inherit-input-method)
</span>
                                      <span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">Define the actual input method
</span>(quail-define-package <span style="font-style: italic;">"math"</span> <span style="font-style: italic;">"UTF-8"</span> <span style="font-style: italic;">"&#937;"</span> t)
(<span style="font-weight: bold;">quail-define-rules</span> <span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">add whatever extra rules you want to define here...
</span> (<span style="font-style: italic;">"\\fun"</span>    ?&#955;)
 (<span style="font-style: italic;">"\\mult"</span>   ?&#8901;)
 (<span style="font-style: italic;">"\\ent"</span>    ?&#8866;)
 (<span style="font-style: italic;">"\\valid"</span>  ?&#10003;)
 (<span style="font-style: italic;">"\\diamond"</span> ?&#9671;)
 (<span style="font-style: italic;">"\\box"</span>    ?&#9633;)
 (<span style="font-style: italic;">"\\bbox"</span>   ?&#9632;)
 (<span style="font-style: italic;">"\\later"</span>  ?&#9655;)
 (<span style="font-style: italic;">"\\pred"</span>   ?&#966;)
 (<span style="font-style: italic;">"\\and"</span>    ?&#8743;)
 (<span style="font-style: italic;">"\\or"</span>     ?&#8744;)
 (<span style="font-style: italic;">"\\comp"</span>   ?&#8728;)
 (<span style="font-style: italic;">"\\ccomp"</span>  ?&#9678;)
 (<span style="font-style: italic;">"\\all"</span>    ?&#8704;)
 (<span style="font-style: italic;">"\\ex"</span>     ?&#8707;)
 (<span style="font-style: italic;">"\\to"</span>     ?&#8594;)
 (<span style="font-style: italic;">"\\sep"</span>    ?&#8727;)
 (<span style="font-style: italic;">"\\lc"</span>     ?&#8988;)
 (<span style="font-style: italic;">"\\rc"</span>     ?&#8989;)
 (<span style="font-style: italic;">"\\Lc"</span>     ?&#9121;)
 (<span style="font-style: italic;">"\\Rc"</span>     ?&#9124;)
 (<span style="font-style: italic;">"\\lam"</span>    ?&#955;)
 (<span style="font-style: italic;">"\\empty"</span>  ?&#8709;)
 (<span style="font-style: italic;">"\\Lam"</span>    ?&#923;)
 (<span style="font-style: italic;">"\\Sig"</span>    ?&#931;)
 (<span style="font-style: italic;">"\\-"</span>      ?&#8726;)
 (<span style="font-style: italic;">"\\aa"</span>     ?&#9679;)
 (<span style="font-style: italic;">"\\af"</span>     ?&#9711;)
 (<span style="font-style: italic;">"\\auth"</span>   ?&#9679;)
 (<span style="font-style: italic;">"\\frag"</span>   ?&#9711;)
 (<span style="font-style: italic;">"\\iff"</span>    ?&#8596;)
 (<span style="font-style: italic;">"\\gname"</span>  ?&#947;)
 (<span style="font-style: italic;">"\\incl"</span>   ?&#8828;)
 (<span style="font-style: italic;">"\\latert"</span> ?&#9654;)
 (<span style="font-style: italic;">"\\update"</span> ?&#8669;)
 (<span style="font-style: italic;">"\\nin"</span> ?&#8713;)
 (<span style="font-style: italic;">"\\u"</span> ?&#8746;)
 (<span style="font-style: italic;">"\\points"</span> ?&#8614;)

 <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">accents (for iL&#246;b)
</span> (<span style="font-style: italic;">"\\\"o"</span> ?&#246;)

 <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">subscripts and superscripts
</span> (<span style="font-style: italic;">"^^+"</span> ?&#8314;) (<span style="font-style: italic;">"__+"</span> ?&#8330;) (<span style="font-style: italic;">"^^-"</span> ?&#8315;)
 (<span style="font-style: italic;">"__0"</span> ?&#8320;) (<span style="font-style: italic;">"__1"</span> ?&#8321;) (<span style="font-style: italic;">"__2"</span> ?&#8322;) (<span style="font-style: italic;">"__3"</span> ?&#8323;) (<span style="font-style: italic;">"__4"</span> ?&#8324;)
 (<span style="font-style: italic;">"__5"</span> ?&#8325;) (<span style="font-style: italic;">"__6"</span> ?&#8326;) (<span style="font-style: italic;">"__7"</span> ?&#8327;) (<span style="font-style: italic;">"__8"</span> ?&#8328;) (<span style="font-style: italic;">"__9"</span> ?&#8329;)

 (<span style="font-style: italic;">"__a"</span> ?&#8336;) (<span style="font-style: italic;">"__e"</span> ?&#8337;) (<span style="font-style: italic;">"__h"</span> ?&#8341;) (<span style="font-style: italic;">"__i"</span> ?&#7522;) (<span style="font-style: italic;">"__k"</span> ?&#8342;)
 (<span style="font-style: italic;">"__l"</span> ?&#8343;) (<span style="font-style: italic;">"__m"</span> ?&#8344;) (<span style="font-style: italic;">"__n"</span> ?&#8345;) (<span style="font-style: italic;">"__o"</span> ?&#8338;) (<span style="font-style: italic;">"__p"</span> ?&#8346;)
 (<span style="font-style: italic;">"__r"</span> ?&#7523;) (<span style="font-style: italic;">"__s"</span> ?&#8347;) (<span style="font-style: italic;">"__t"</span> ?&#8348;) (<span style="font-style: italic;">"__u"</span> ?&#7524;) (<span style="font-style: italic;">"__v"</span> ?&#7525;) (<span style="font-style: italic;">"__x"</span> ?&#8339;)
 )
(mapc (<span style="font-weight: bold;">lambda</span> (x)
        (<span style="font-weight: bold;">if</span> (cddr x)
            (quail-defrule (cadr x) (car (cddr x)))))
                                      <span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">need to reverse since different emacs packages disagree on whether
</span>                                      <span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">the first or last entry should take priority...
</span>                                      <span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">see <a href="https://mattermost.mpi-sws.org/iris/pl/46onxnb3tb8ndg8b6h1z1f7tny">&lt;https://mattermost.mpi-sws.org/iris/pl/46onxnb3tb8ndg8b6h1z1f7tny&gt;</a> for discussion
</span>      (reverse (append math-symbol-list-basic math-symbol-list-extended)))
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgbb6d2bb" class="outline-2">
<h2 id="orgbb6d2bb">Settings for Text Mode</h2>
<div class="outline-text-2" id="text-orgbb6d2bb">
<p>
Enable auto-fill.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-hook 'text-mode-hook #'auto-fill-mode)

</pre>
</div>
<p>
Enable <code>Writeroom</code> mode for a more comfortable writing experience.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">use-package</span> writeroom-mode
  <span style="font-weight: bold;">:hook</span> (text-mode . writeroom-mode)
  <span style="font-weight: bold;">:custom</span> (writeroom-mode-line t)
  <span style="font-weight: bold;">:custom</span> (writeroom-maximize-window nil)
  )
</pre>
</div>
<p>
Use <code>aspell</code> as default spell checking program (should be default, but
something is changing it)
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> ispell-program-name <span style="font-style: italic;">"/usr/bin/aspell"</span>)
</pre>
</div>
<p>
Enable <code>Flyspell</code> for spell checking
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">use-package</span> flyspell
  <span style="font-weight: bold;">:hook</span> (text-mode . flyspell-mode)
  <span style="font-weight: bold;">:hook</span> (prog-mode . flyspell-prog-mode))

(<span style="font-weight: bold;">use-package</span> flyspell-correct
  <span style="font-weight: bold;">:bind</span>
  (<span style="font-weight: bold;">:map</span> flyspell-mode-map
        (<span style="font-style: italic;">"C-c  $"</span> . flyspell-correct-wrapper)
        ))

(<span style="font-weight: bold;">use-package</span> flyspell-correct-ivy)
</pre>
</div>
<p>
Removes completion at point from <code>flyspell</code> so that I can use it for
completing org roam nodes.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(keymap-unset flyspell-mode-map <span style="font-style: italic;">"C-M-i"</span>)
</pre>
</div>
<p>
Package for TeX files
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">use-package</span> auctex)
</pre>
</div>
<p>
Disable word completion in text-mode
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> text-mode-ispell-word-completion nil)
</pre>
</div>
</div>
</div>
<div id="outline-container-orgca122b7" class="outline-2">
<h2 id="orgca122b7">Ivy</h2>
<div class="outline-text-2" id="text-orgca122b7">
<p>
Default ivy configuration
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">use-package</span> ivy)
(ivy-mode)
(<span style="font-weight: bold;">setq</span> enable-recursive-minibuffers t)
(<span style="font-weight: bold;">use-package</span> swiper)
(<span style="font-weight: bold;">use-package</span> counsel)
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">enable this if you want `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">swiper</span><span style="font-weight: bold; font-style: italic;">' to use it
</span>(<span style="font-weight: bold;">setq</span> search-default-mode #'char-fold-to-regexp)
(global-set-key <span style="font-style: italic;">"\C-s"</span> 'swiper)
(global-set-key (kbd <span style="font-style: italic;">"C-c C-r"</span>) 'ivy-resume)
(global-set-key (kbd <span style="font-style: italic;">"&lt;f6&gt;"</span>) 'ivy-resume)
(global-set-key (kbd <span style="font-style: italic;">"M-x"</span>) 'counsel-M-x)
(global-set-key (kbd <span style="font-style: italic;">"C-x C-f"</span>) 'counsel-find-file)
(global-set-key (kbd <span style="font-style: italic;">"&lt;f1&gt; l"</span>) 'counsel-find-library)
(global-set-key (kbd <span style="font-style: italic;">"&lt;f2&gt; i"</span>) 'counsel-info-lookup-symbol)
(global-set-key (kbd <span style="font-style: italic;">"&lt;f2&gt; u"</span>) 'counsel-unicode-char)
(global-set-key (kbd <span style="font-style: italic;">"C-c g"</span>) 'counsel-git)
(global-set-key (kbd <span style="font-style: italic;">"C-c j"</span>) 'counsel-git-grep)
(global-set-key (kbd <span style="font-style: italic;">"C-c k"</span>) 'counsel-ag)
(global-set-key (kbd <span style="font-style: italic;">"C-x l"</span>) 'counsel-locate)
(global-set-key (kbd <span style="font-style: italic;">"C-S-o"</span>) 'counsel-rhythmbox)
(global-set-key (kbd <span style="font-style: italic;">"C-x C-b"</span>) 'counsel-recentf)
(define-key minibuffer-local-map (kbd <span style="font-style: italic;">"C-r"</span>) 'counsel-minibuffer-history)
</pre>
</div>
<p>
Don't show number of candidates
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> ivy-count-format <span style="font-style: italic;">""</span>)
</pre>
</div>
<p>
Ivy ignores order in which words are written
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> ivy-re-builders-alist
      '((t . ivy--regex-plus)))
</pre>
</div>
<p>
Sort commands and buffers by most recently used
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">use-package</span> smex)
</pre>
</div>
<p>
Remove stupid ^
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> ivy-initial-inputs-alist nil)
</pre>
</div>
<p>
Ivy ignores the order in which words are typed.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> ivy-re-builders-alist
      '((t . ivy--regex-ignore-order)))
</pre>
</div>
<p>
Ivy buffer with icons and more information
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">use-package</span> all-the-icons
  <span style="font-weight: bold;">:if</span> (display-graphic-p)
  <span style="font-weight: bold;">:config</span>
  (<span style="font-weight: bold;">setq</span> all-the-icons-scale-factor 0.8))

(<span style="font-weight: bold;">use-package</span> all-the-icons-ivy-rich
  <span style="font-weight: bold;">:after</span> counsel-projectile
  <span style="font-weight: bold;">:config</span>
  (<span style="font-weight: bold;">setq</span> all-the-icons-ivy-rich-icon-size 0.8))

(<span style="font-weight: bold;">use-package</span> ivy-rich
  <span style="font-weight: bold;">:after</span> all-the-icons-ivy-rich)

(ivy-rich-mode 1)
(all-the-icons-ivy-rich-mode 1)
</pre>
</div>
<p>
Allows to select the prompt instead of a listed candidate. Mostly
useful when creating and renaming files
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> ivy-use-selectable-prompt t)
</pre>
</div>

<p>
Ivy completion now pops up in dedicated frame
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">use-package</span> ivy-posframe)
(ivy-posframe-mode 1)
</pre>
</div>
<p>
Non-transparent <i>posframe</i>
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> ivy-posframe-parameters '((alpha . 100)))
</pre>
</div>

<p>
Do not use a <i>posframe</i> for <i>swiper</i>
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> ivy-posframe-display-functions-alist
      '((swiper          . ivy-display-function-fallback)
        (t               . ivy-posframe-display)))
</pre>
</div>

<p>
Fixed width for ivy posframe
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my-ivy-posframe-get-size</span> ()
  <span style="font-style: italic;">"Set the ivy-posframe size according to the current frame."</span>
  (<span style="font-weight: bold;">let</span> ((height (<span style="font-weight: bold;">or</span> ivy-posframe-height (<span style="font-weight: bold;">or</span> ivy-height 10)))
        (width (min (<span style="font-weight: bold;">or</span> ivy-posframe-width 200) (round (* .9 (frame-width))))))
    (list <span style="font-weight: bold;">:height</span> height <span style="font-weight: bold;">:width</span> width <span style="font-weight: bold;">:min-height</span> height <span style="font-weight: bold;">:min-width</span> width)))

(<span style="font-weight: bold;">setq</span> ivy-posframe-size-function 'my-ivy-posframe-get-size)
</pre>
</div>

<p>
Absolutely no idea what this does, but it makes ivy rich mode not slow
as a brick
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(eval-after-load 'ivy-rich
  (<span style="font-weight: bold;">progn</span>
    (<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">ek/ivy-rich-cache</span>
      (make-hash-table <span style="font-weight: bold;">:test</span> 'equal))

    (<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">ek/ivy-rich-cache-lookup</span> (delegate candidate)
      (<span style="font-weight: bold;">let</span> ((result (gethash candidate ek/ivy-rich-cache)))
        (<span style="font-weight: bold;">unless</span> result
          (<span style="font-weight: bold;">setq</span> result (funcall delegate candidate))
          (puthash candidate result ek/ivy-rich-cache))
        result))

    (<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">ek/ivy-rich-cache-reset</span> ()
      (clrhash ek/ivy-rich-cache))

    (<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">ek/ivy-rich-cache-rebuild</span> ()
      (mapc (<span style="font-weight: bold;">lambda</span> (buffer)
              (ivy-rich--ivy-switch-buffer-transformer (buffer-name buffer)))
            (buffer-list)))

    (<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">ek/ivy-rich-cache-rebuild-trigger</span> ()
      (ek/ivy-rich-cache-reset)
      (run-with-idle-timer 1 nil 'ek/ivy-rich-cache-rebuild))

    (advice-add 'ivy-rich--ivy-switch-buffer-transformer <span style="font-weight: bold;">:around</span> 'ek/ivy-rich-cache-lookup)
    (advice-add 'ivy-switch-buffer <span style="font-weight: bold;">:after</span> 'ek/ivy-rich-cache-rebuild-trigger)))
</pre>
</div>
</div>
</div>
<div id="outline-container-orgb01eccf" class="outline-2">
<h2 id="orgb01eccf">Appearance</h2>
<div class="outline-text-2" id="text-orgb01eccf">
<p>
Disable Splash Screen
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> inhibit-splash-screen t)
</pre>
</div>
<p>
Define font style and height
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="font-weight: bold; font-style: italic;">;</span><span style="font-weight: bold; font-style: italic;">All future frames (useful for the daemon)
</span>(<span style="font-weight: bold;">setq</span> default-frame-alist '((font . <span style="font-style: italic;">"Roboto Mono 22"</span>)))
(add-to-list 'default-frame-alist '(background-color . <span style="font-style: italic;">"#34293E"</span>))
<span style="font-weight: bold; font-style: italic;">;</span><span style="font-weight: bold; font-style: italic;">The initial frame (useful for the gui)
</span>(<span style="font-weight: bold;">setq</span> initial-frame-alist '((font . <span style="font-style: italic;">"Roboto Mono 22"</span>)))
(add-to-list 'initial-frame-alist '(background-color . <span style="font-style: italic;">"#34293E"</span>))
<span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">Only relevant for terminals
</span>(set-background-color <span style="font-style: italic;">"black"</span>)
</pre>
</div>
<p>
Set theme (currently Shades of Purple).  My setup is a little weird: I
first set it to <code>doom-shades-of-purple</code> and then <code>shades-of-purple</code>.  This
ends up with a color scheme that is pleasant for most modes.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">use-package</span> doom-themes)
(<span style="font-weight: bold;">use-package</span> shades-of-purple-theme)
(<span style="font-weight: bold;">setq</span> custom-safe-themes t)
(load-theme 'doom-shades-of-purple t)
(load-theme 'shades-of-purple)
</pre>
</div>
<p>
Disables a bunch of needless UI noise.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">cond</span> ((&gt; emacs-major-version 20)
       (tool-bar-mode -1) <span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">introduced in emacs 21
</span>       (menu-bar-mode -1)
       (scroll-bar-mode -1)
       (menu-bar-showhide-fringe-menu-customize-disable)
       (blink-cursor-mode -1)
       (windmove-default-keybindings 'meta)))
</pre>
</div>
<p>
Pretty mode line
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">use-package</span> doom-modeline)
(doom-modeline-mode 1)

(<span style="font-weight: bold;">use-package</span> doom-modeline-now-playing)
(doom-modeline-now-playing-timer)

(doom-modeline-def-modeline 'main
 '(bar matches buffer-info buffer-position now-playing)
 '(time major-mode))

</pre>
</div>

<p>
Transparent emacs frames.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(set-frame-parameter (selected-frame) 'alpha '(80 . 80))
(add-to-list 'default-frame-alist '(alpha . (70 . 70)))
</pre>
</div>

<p>
Display time in mode line
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(display-time-mode 1)
</pre>
</div>
</div>
</div>

<div id="outline-container-org4d8448a" class="outline-2">
<h2 id="org4d8448a">Email</h2>
<div class="outline-text-2" id="text-org4d8448a">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> message-send-mail-function 'smtpmail-send-it)

(<span style="font-weight: bold;">setq</span> user-mail-address <span style="font-style: italic;">"tl.soares@campus.fct.unl.pt"</span>)

(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">mu4e</span>)

(<span style="font-weight: bold;">use-package</span> mu4e
  <span style="font-weight: bold;">:ensure</span> nil
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">:load-path "/usr/share/emacs/site-lisp/mu4e/"
</span>  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">:defer 20 ; Wait until 20 seconds after startup
</span>  <span style="font-weight: bold;">:bind</span> (<span style="font-weight: bold;">:map</span> mu4e-headers-mode-map
            (<span style="font-style: italic;">"q"</span> . mu4e-dashboard))
  <span style="font-weight: bold;">:config</span>

  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">This is set to '</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">t</span><span style="font-weight: bold; font-style: italic;">' to avoid mail syncing issues when using mbsync
</span>  (<span style="font-weight: bold;">setq</span> mu4e-change-filenames-when-moving t)
  (<span style="font-weight: bold;">setq</span> mu4e-context-policy <span style="font-style: italic;">"pick-first"</span>)
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Refresh mail using isync every minute
</span>  (<span style="font-weight: bold;">setq</span> mu4e-update-interval 60)
  (<span style="font-weight: bold;">setq</span> mu4e-get-mail-command <span style="font-style: italic;">"mbsync -a"</span>)

  (<span style="font-weight: bold;">setq</span> mu4e-maildir <span style="font-style: italic;">"~/mail"</span>)

  (<span style="font-weight: bold;">setq</span> mu4e-contexts
        (list
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Work account
</span>         (make-mu4e-context
          <span style="font-weight: bold;">:name</span> <span style="font-style: italic;">"FCT"</span>
          <span style="font-weight: bold;">:match-func</span>
          (<span style="font-weight: bold;">lambda</span> (msg)
            (<span style="font-weight: bold;">when</span> msg
              (string-prefix-p <span style="font-style: italic;">"/gmail"</span> (mu4e-message-field msg <span style="font-weight: bold;">:maildir</span>))))
          <span style="font-weight: bold;">:vars</span> `((user-mail-address . ,email1)
                  (user-full-name    . <span style="font-style: italic;">"Tiago Soares"</span>)
                (smtpmail-smtp-server . <span style="font-style: italic;">"smtp.gmail.com"</span>)
                (smtpmail-smtp-service . 465)
                (smtpmail-stream-type . ssl)
                  (mu4e-drafts-folder  . <span style="font-style: italic;">"/gmail/[Gmail]/Drafts"</span>)
                  (mu4e-sent-folder  . <span style="font-style: italic;">"/gmail/[Gmail]/Sent Mail"</span>)
                  (mu4e-refile-folder  . <span style="font-style: italic;">"/gmail/[Gmail]/All Mail"</span>)
                  (mu4e-trash-folder  . <span style="font-style: italic;">"/gmail/[Gmail]/Trash"</span>)))
       (make-mu4e-context
          <span style="font-weight: bold;">:name</span> <span style="font-style: italic;">"Inria"</span>
          <span style="font-weight: bold;">:match-func</span>
          (<span style="font-weight: bold;">lambda</span> (msg)
            (<span style="font-weight: bold;">when</span> msg
              (string-prefix-p <span style="font-style: italic;">"/inria"</span> (mu4e-message-field msg <span style="font-weight: bold;">:maildir</span>))))
          <span style="font-weight: bold;">:vars</span> `((user-mail-address . ,email2)
                  (user-full-name    . <span style="font-style: italic;">"Tiago Soares"</span>)
                (smtpmail-smtp-server . <span style="font-style: italic;">"smtp.inria.fr"</span>)
                (smtpmail-smtp-service . 587)
                (smtpmail-stream-type . nil)
                  (mu4e-drafts-folder  . <span style="font-style: italic;">"/inria/Drafts"</span>)
                  (mu4e-sent-folder  . <span style="font-style: italic;">"/inria/Sent"</span>)
                  (mu4e-trash-folder  . <span style="font-style: italic;">"/inria/Trash"</span>)))

       )
      )
  (<span style="font-weight: bold;">setq</span> mu4e-maildir-shortcuts
      '((<span style="font-style: italic;">"/gmail/inbox"</span>             . ?f)
          (<span style="font-style: italic;">"/inria/inbox"</span>             . ?i)
          (<span style="font-style: italic;">"/gmail/[Gmail]/Trash"</span>     . ?t)
          (<span style="font-style: italic;">"/gmail/[Gmail]/Drafts"</span>    . ?d)
          (<span style="font-style: italic;">"/gmail/[Gmail]/All Mail"</span>  . ?a)))
  )

(<span style="font-weight: bold;">use-package</span> mu4e-alert)
(mu4e-alert-enable-notifications)

(<span style="font-weight: bold;">use-package</span> go-translate)
(<span style="font-weight: bold;">setq</span> gt-langs '(fr en))
(<span style="font-weight: bold;">setq</span> gt-default-translator (gt-translator <span style="font-weight: bold;">:engines</span> (gt-google-engine)))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">This configuration means:
</span><span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Initialize the default translator, let it translate between en and fr via Google Translate,
</span><span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">and the result will be displayed in the Echo Area.
</span>
(<span style="font-weight: bold;">setq</span> gt-default-translator
      (gt-translator
       <span style="font-weight: bold;">:taker</span>   (gt-taker <span style="font-weight: bold;">:text</span> 'buffer <span style="font-weight: bold;">:pick</span> 'paragraph)  <span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">config the Taker
</span>       <span style="font-weight: bold;">:engines</span> (list (gt-bing-engine) (gt-google-engine)) <span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">specify the Engines
</span>       <span style="font-weight: bold;">:render</span>  (gt-buffer-render)))                       <span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">config the Render
</span>
(<span style="font-weight: bold;">setq</span> mu4e-headers-fields '((<span style="font-weight: bold;">:human-date</span> . 12) (<span style="font-weight: bold;">:from</span> . 22) (<span style="font-weight: bold;">:subject</span>)))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">This configuration means:
</span><span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Initialize the default translator, let it send all paragraphs in the buffer to Bing and Google,
</span><span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">and output the results with a new Buffer.
</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">This configuration means:
</span><span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Initialize the default translator, let it translate between en and fr via Google Translate,
</span><span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">and the result will be displayed in the Echo Area.
</span>
(add-hook 'mu4e-view-mode-hook #'writeroom-mode)
(add-hook 'mu4e-headers-mode-hook #'writeroom-mode)
(add-hook 'message-mode-hook #'auto-fill-mode)
(load <span style="font-style: italic;">"~/.mu4e-dashboard/mu4e-dashboard.el"</span>)

(mu4e)

(<span style="font-weight: bold;">setq</span> message-cite-reply-position 'above)

(<span style="font-weight: bold;">setq</span> mu4e-hide-index-messages t)
</pre>
</div>
</div>
</div>

<div id="outline-container-org11d277c" class="outline-2">
<h2 id="org11d277c"><code>Eshell</code></h2>
<div class="outline-text-2" id="text-org11d277c">
<p>
Fish like suggestions for <code>eshell</code>
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">use-package</span> company)

(<span style="font-weight: bold;">use-package</span> esh-autosuggest
  <span style="font-weight: bold;">:hook</span> (eshell-mode . esh-autosuggest-mode)
  <span style="font-weight: bold;">:custom</span> (eshell-history-size 50000)
  <span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">since esh autosuggest uses the eshell history, we increase it so
</span>  <span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">that we have more possible suggesions
</span>  <span style="font-weight: bold;">:custom</span> (company-minimum-prefix-length 1)
  <span style="font-weight: bold;">:bind</span> (<span style="font-weight: bold;">:map</span> esh-autosuggest-active-map
              (<span style="font-style: italic;">"C-f"</span> . esh-autosuggest-complete-word)
              (<span style="font-style: italic;">"C-e"</span> . company-complete))
  )
</pre>
</div>
<p>
Pretty <code>eshell</code> prompt
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(load-file <span style="font-style: italic;">"/home/tiago/.config/prompt.el"</span>)
(<span style="font-weight: bold;">setq</span> eshell-prompt-function #'epe-theme-dakrone)
</pre>
</div>

<p>
Function for clearing the shell
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">eshell-clear</span> ()
  (<span style="font-weight: bold;">interactive</span>)
  <span style="font-style: italic;">"Clear the eshell buffer."</span>
  (<span style="font-weight: bold;">let</span> ((inhibit-read-only t))
    (erase-buffer)
    (eshell-send-input)
    (beginning-of-buffer)
    (kill-line)
    (end-of-buffer)
    ))
</pre>
</div>
<p>
Function for getting to the base of any project. Useful for spawning
shells since having it at the root of the project is generally more
convenient.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">project-files</span>
  '(<span style="font-style: italic;">"dune-project"</span> <span style="font-style: italic;">"package.json"</span>
    <span style="font-style: italic;">"CoqProject"</span> <span style="font-style: italic;">"Makefile"</span>
    )
  )

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">is-base</span> ()
  (<span style="font-weight: bold;">or</span> (equal default-directory <span style="font-style: italic;">"/"</span>)
      (not (eq (seq-intersection
         (directory-files <span style="font-style: italic;">"."</span>)
         project-files
         'equal
         ) <span style="font-weight: bold;">nil)</span>
      ))
  )

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">get-to-base</span> ()
  (<span style="font-weight: bold;">let</span> ((c default-directory))
  (<span style="font-weight: bold;">progn</span>
    (<span style="font-weight: bold;">while</span> (not (is-base))
      (find-file <span style="font-style: italic;">".."</span>))
    (<span style="font-weight: bold;">when</span> (equal default-directory <span style="font-style: italic;">"/"</span>)
        (find-file c)
        )
  )))
</pre>
</div>
<p>
Always spawns eshell on a new terminal
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">multi-eshell</span> ()
  (<span style="font-weight: bold;">interactive</span>)
  (<span style="font-weight: bold;">let</span> ((b (current-buffer)))
  (<span style="font-weight: bold;">when</span> (seq-find
         (<span style="font-weight: bold;">lambda</span> (val)
           (equal <span style="font-style: italic;">"*eshell*"</span> (buffer-name val)))
         (buffer-list))
    (switch-to-buffer <span style="font-style: italic;">"*eshell*"</span>)
    (rename-uniquely))
  (switch-to-buffer b)
  (eshell)))
</pre>
</div>
<p>
Key binding for spawning a new instance of <code>eshell</code> at the root of a
project.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">eshell-spawn</span> ()
  (<span style="font-weight: bold;">interactive</span>)
  (get-to-base)
  (multi-eshell))
(<span style="font-weight: bold;">bind-key</span> <span style="font-style: italic;">"C-c C-SPC"</span> 'eshell-spawn)
</pre>
</div>
<p>
Delete duplicates in the <code>eshell</code> history
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> eshell-hist-ignoredups t)
</pre>
</div>
<p>
Function to run <code>eshell</code> command.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">eshell-send-command</span> (s)
  (<span style="font-weight: bold;">interactive</span>)
  (eshell-return-to-prompt)
  (insert s)
  (eshell-send-input))
</pre>
</div>
<p>
Augments <code>eshell</code>'s completion framework so that it behaves more like
fish (e.g. "pacman -S &#x2026;" completes the name of the package)
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">use-package</span> fish-completion)
(global-fish-completion-mode 1)
</pre>
</div>
<p>
I never know man
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> eshell-cmpl-dir-ignore <span style="font-style: italic;">"\\`</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">(</span><span style="font-style: italic;">CVS</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">)</span><span style="font-style: italic;">/\\'"</span>)
</pre>
</div>
<p>
Add rust packages to path
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-to-list 'exec-path <span style="font-style: italic;">"~/.cargo/bin"</span>)
</pre>
</div>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">set-envs</span> (l) (<span style="font-weight: bold;">dolist</span> (p (nth 0 l)) (setenv (nth 0 p) (nth 1 p))))
</pre>
</div>

<p>
Buffer name matches eshell directory
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">sync-dir-in-buffer-name</span> ()
    (rename-buffer (concat <span style="font-style: italic;">"*eshell* "</span> default-directory) t))

(add-hook 'eshell-mode-hook #'sync-dir-in-buffer-name)
(add-hook 'eshell-directory-change-hook #'sync-dir-in-buffer-name)
</pre>
</div>
</div>
<div id="outline-container-org492671d" class="outline-3">
<h3 id="org492671d"><code>Eshell</code> configuration</h3>
<div class="outline-text-3" id="text-org492671d">
<p>
Startup configuration. Sets the opam environment variables and runs
<code>fastfetch</code>.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-hook 'eshell-mode-hook
        (<span style="font-weight: bold;">lambda</span> ()
          (define-key eshell-mode-map (kbd <span style="font-style: italic;">"C-l"</span>) #'eshell-clear)))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">startup</span> ()
  (<span style="font-weight: bold;">interactive</span>)
  (eshell-send-command <span style="font-style: italic;">"opam-set &amp;&amp; fastfetch"</span>)
  (<span style="font-weight: bold;">let</span> ((inhibit-read-only t))
    (eshell-previous-prompt 1)
    (beginning-of-line)
    (kill-line)
    (kill-line)
    (eshell-next-prompt 1)))

(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">eshell</span>)
(<span style="font-weight: bold;">use-package</span> eshell
  <span style="font-weight: bold;">:hook</span> (eshell-mode . startup)
  <span style="font-weight: bold;">:custom</span> (eshell-banner-message <span style="font-style: italic;">""</span>)
  )
</pre>
</div>
</div>
</div>
<div id="outline-container-org57ba5a6" class="outline-3">
<h3 id="org57ba5a6">Configuration for Visual Commands</h3>
<div class="outline-text-3" id="text-org57ba5a6">
<p>
We use eat to run any commands that require visuals
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">use-package</span> eat
  <span style="font-weight: bold;">:custom</span> (eat-kill-buffer-on-exit t)
  <span style="font-weight: bold;">:hook</span> (eshell-mode . eat-eshell-mode)
  )
</pre>
</div>
<p>
-e * EXWM
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">use-package</span> exwm)
</pre>
</div>
<p>
Setting the initial workspace number
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> exwm-workspace-number 4)
</pre>
</div>
<p>
Make it so that EXWM buffers are named after the window they are managing
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-hook 'exwm-update-class-hook
        (<span style="font-weight: bold;">lambda</span> () (exwm-workspace-rename-buffer exwm-class-name)))
</pre>
</div>

<p>
In an EXWM buffer, the bindings on the left are mapped to the bindings
on the right. This way, we can use Emacs keybindings in X windows.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> exwm-input-simulation-keys
      '(([?\C-b] . [left])
        ([?\C-f] . [right])
      ([?\M-f] . [C-right])
      ([?\M-b] . [C-left])
        ([?\C-p] . [up])
        ([?\C-n] . [down])
        ([?\C-a] . [home])
        ([?\C-e] . [end])
        ([?\M-v] . [prior])
      ([?\M-w] . [C-c])
      ([?\C-y] . [C-v])
      ([?\C-_] . [C-z])
        ([?\C-v] . [next])
        ([?\C-d] . [delete])
      ([?\C-s] . [C-f])
        ([?\C-k] . [S-end delete])
      ([?\C- ] . [C-a])
      ([?\C-g] . [escape])
      ([?\C-j] . [S-return])
      ([?\C-w] . [C-x])
      ))
</pre>
</div>
<p>
Minor mode to rename Firefox EXWM buffers to the names of the
respective tabs.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">use-package</span> exwm-firefox-core)
(load-file <span style="font-style: italic;">"~/exwm-firefox.el"</span>)
(exwm-firefox-mode 1)
</pre>
</div>
<p>
Enable a system tray in the minibuffer. This is where icons for the
network manager and other background applications will be.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(exwm-systemtray-mode)
</pre>
</div>
<p>
Better splitting of windows
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my-split-window-right</span> (<span style="font-weight: bold; text-decoration: underline;">&amp;optional</span> arg)
  <span style="font-style: italic;">"Split the current window 70/30 rather than 50/50.
A single-digit prefix argument gives the top window arg*10%.
   Writeroom window must be treated specially."</span>
  (<span style="font-weight: bold;">interactive</span> <span style="font-style: italic;">"P"</span>)
  (<span style="font-weight: bold;">let</span> ((proportion (* (<span style="font-weight: bold;">or</span> arg 6)
                     (<span style="font-weight: bold;">if</span> writeroom-mode 0.14 0.1))))
    (split-window-right (round (* proportion (window-width))))))

(global-set-key (kbd <span style="font-style: italic;">"C-x 3"</span>) 'my-split-window-right)
</pre>
</div>

<p>
Sometimes when switching to an X window, EXWM does not focus on it.
This piece of code prevents this.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(advice-add #'exwm-layout--hide
            <span style="font-weight: bold;">:after</span> (<span style="font-weight: bold;">lambda</span> (id)
                     (<span style="font-weight: bold;">with-current-buffer</span> (exwm--id-&gt;buffer id)
                       (<span style="font-weight: bold;">setq</span> exwm--ewmh-state
                             (delq xcb:Atom:_NET_WM_STATE_HIDDEN exwm--ewmh-state))
                       (exwm-layout--set-ewmh-state id)
                       (xcb:flush exwm--connection))))
</pre>
</div>
<p>
Functions to shutdown and reboot the system
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">efs/shutdown</span> ()
  (<span style="font-weight: bold;">interactive</span>)
  (shell-command <span style="font-style: italic;">"shutdown -h now"</span>))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">efs/reboot</span> ()
  (<span style="font-weight: bold;">interactive</span>)
  (shell-command <span style="font-style: italic;">"shutdown -r now"</span>))
</pre>
</div>
<p>
Mouse follows focus
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">use-package</span> exwm-mff)
(add-hook 'exwm-init-hook #'exwm-mff-mode)
</pre>
</div>

<p>
Inner "Gaps"
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(window-divider-mode 1)
(<span style="font-weight: bold;">setq</span> window-divider-default-bottom-width 6)
(<span style="font-weight: bold;">setq</span> window-divider-default-right-width 6)
(menu-bar-bottom-and-right-window-divider)
</pre>
</div>
<p>
EXWM allows switching to X windows in a different workspace.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> exwm-workspace-show-all-buffers 1)
(<span style="font-weight: bold;">setq</span> exwm-layout-show-all-buffers 1)
</pre>
</div>
</div>
<div id="outline-container-orgd532b2f" class="outline-4">
<h4 id="orgd532b2f">Keybindings for desktop utilities</h4>
<div class="outline-text-4" id="text-orgd532b2f">
<p>
We use the <code>desktop-environment</code> package to help us change the volume,
adjust brightness, etc&#x2026;
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">use-package</span> desktop-environment)
(desktop-environment-mode 1)
</pre>
</div>

<p>
Disable the keybinding for locking the screen as we use this binding
for window navigation
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(define-key desktop-environment-mode-map (kbd <span style="font-style: italic;">"s-l"</span>) nil t)
</pre>
</div>

<p>
Command for muting the volume
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> desktop-environment-volume-toggle-command
      <span style="font-style: italic;">"amixer -D pulse set Master 1+ toggle"</span>)
</pre>
</div>

<p>
Command for setting the volume
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> desktop-environment-volume-set-command
      <span style="font-style: italic;">"~/.config/vol_set.sh %s"</span>)
</pre>
</div>

<p>
Command for getting the current value of the volume
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> desktop-environment-volume-get-command
      <span style="font-style: italic;">"amixer -D pulse get Master"</span>)
</pre>
</div>

<p>
Command for screenshots
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> desktop-environment-screenshot-directory
      <span style="font-style: italic;">"~/pictures"</span>)
</pre>
</div>

<p>
Locking the screen also pauses any media
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> desktop-environment-screenlock-command <span style="font-style: italic;">"~/.config/lock.sh"</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-org0129317" class="outline-4">
<h4 id="org0129317">Background processes</h4>
<div class="outline-text-4" id="text-org0129317">
<p>
Helper function to run a program in the background
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">efs/run-in-background</span> (command)
  (<span style="font-weight: bold;">let</span> ((command-parts (split-string command <span style="font-style: italic;">"[ ]+"</span>)))
    (apply #'call-process `(,(car command-parts) nil 0 nil ,@(cdr command-parts)))))
</pre>
</div>

<p>
Network manager applet
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(efs/run-in-background <span style="font-style: italic;">"nm-applet"</span>)
</pre>
</div>

<p>
Sound display
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(efs/run-in-background <span style="font-style: italic;">"volumeicon"</span>)
</pre>
</div>

<p>
Messaging apps
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(efs/run-in-background <span style="font-style: italic;">"discord"</span>)
(efs/run-in-background <span style="font-style: italic;">"slack"</span>)
(efs/run-in-background <span style="font-style: italic;">"firefox --new-window https://web.whatsapp.com/"</span>)
(efs/run-in-background <span style="font-style: italic;">"firefox --new-window https://web.telegram.org/k/"</span>)
</pre>
</div>

<p>
Music player
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(efs/run-in-background <span style="font-style: italic;">"mpd"</span>)
(efs/run-in-background <span style="font-style: italic;">"mpd-notification"</span>)
(start-process-shell-command <span style="font-style: italic;">"work"</span> nil <span style="font-style: italic;">"~/.config/work.sh"</span>)
</pre>
</div>

<p>
Update config files
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(start-process-shell-command <span style="font-style: italic;">"config"</span> nil <span style="font-style: italic;">"~/.update.sh"</span>)
</pre>
</div>

<p>
Auto-pause media when headphones are disconnected
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(efs/run-in-background <span style="font-style: italic;">"bash ~/.config/autopause.sh"</span>)
</pre>
</div>

<p>
Notification daemon
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(efs/run-in-background <span style="font-style: italic;">"dunst"</span>)
</pre>
</div>

<p>
Battery notifications
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(efs/run-in-background <span style="font-style: italic;">"cbatticon"</span>)
</pre>
</div>

<p>
Compositor
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(efs/run-in-background <span style="font-style: italic;">"picom"</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-org5031dc6" class="outline-4">
<h4 id="org5031dc6">Multiple monitors</h4>
<div class="outline-text-4" id="text-org5031dc6">
<p>
Set the initial workspace for each display
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> exwm-randr-workspace-monitor-plist
      '(0 <span style="font-style: italic;">"HDMI-1-0"</span> 1 <span style="font-style: italic;">"HDMI-1-0"</span> 2 <span style="font-style: italic;">"HDMI-1-0"</span>))
</pre>
</div>

<p>
Mouse warping
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> exwm-workspace-warp-cursor t)
</pre>
</div>

<p>
Focus follows mouse
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> mouse-atuoselect-window t
      focus-follows-mouse t)
</pre>
</div>

<p>
Have autorandr running in the background to ensure that extra monitors
are correctly configured.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">efs/update-displays</span> ()
  (efs/run-in-background <span style="font-style: italic;">"autorandr --change --force"</span>)
  (message <span style="font-style: italic;">"Display config: %s"</span>
           (string-trim (shell-command-to-string <span style="font-style: italic;">"autorandr --current"</span>)))
  (start-process-shell-command
   <span style="font-style: italic;">"feh"</span> nil
   <span style="font-style: italic;">"feh --bg-scale ~/.config/bg/lain-dark.jpeg --bg-scale ~/.config/bg/lain-hands.jpeg"</span>))

(add-hook 'exwm-randr-screen-change-hook #'efs/update-displays)
(exwm-randr-mode 1)
</pre>
</div>
</div>
</div>
<div id="outline-container-org7955020" class="outline-4">
<h4 id="org7955020">Keybindings</h4>
<div class="outline-text-4" id="text-org7955020">
<p>
Reset EXWM
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(exwm-input-set-key (kbd <span style="font-style: italic;">"s-r"</span>) 'exwm-reset)
</pre>
</div>

<p>
Switch workspace
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(exwm-input-set-key (kbd <span style="font-style: italic;">"s-w"</span>) 'exwm-workspace-switch)
</pre>
</div>

<p>
Kill the current buffer unless it is a messaging app so that I can
receive notifications in the background.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">kill-except-message-apps</span> ()
  (<span style="font-weight: bold;">interactive</span>)
  (<span style="font-weight: bold;">if</span> (member (buffer-name)
            '(<span style="font-style: italic;">"discord"</span> <span style="font-style: italic;">"*firefox: Telegram Web*"</span> <span style="font-style: italic;">"*firefox: WhatsApp*"</span>))
      (previous-buffer)
    (kill-this-buffer)))

(exwm-input-set-key (kbd <span style="font-style: italic;">"s-c"</span>) 'kill-except-message-apps)
</pre>
</div>

<p>
Window movement
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(exwm-input-set-key (kbd <span style="font-style: italic;">"s-l"</span>) 'windmove-right)
(exwm-input-set-key (kbd <span style="font-style: italic;">"s-j"</span>) 'windmove-left)
(exwm-input-set-key (kbd <span style="font-style: italic;">"s-i"</span>) 'windmove-up)
(exwm-input-set-key (kbd <span style="font-style: italic;">"s-k"</span>) 'windmove-down)
</pre>
</div>

<p>
Window management
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(exwm-input-set-key (kbd <span style="font-style: italic;">"s-L"</span>) 'windmove-swap-states-right)
(exwm-input-set-key (kbd <span style="font-style: italic;">"s-J"</span>) 'windmove-swap-states-left)
(exwm-input-set-key (kbd <span style="font-style: italic;">"s-I"</span>) 'windmove-swap-states-up)
(exwm-input-set-key (kbd <span style="font-style: italic;">"s-K"</span>) 'windmove-swap-states-down)
</pre>
</div>

<p>
Start a desktop application using <i>counsel linux app</i> in a new window
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">open-app</span> ()
  (<span style="font-weight: bold;">interactive</span>)
  (counsel-linux-app))

(<span style="font-weight: bold;">setq</span> counsel-linux-app-format-function
      #'counsel-linux-app-format-function-name-only)
(exwm-input-set-key (kbd <span style="font-style: italic;">"s-d"</span>) 'open-app)
</pre>
</div>

<p>
Suspend the computer
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(exwm-input-set-key (kbd <span style="font-style: italic;">"s-&lt;escape&gt;"</span>) 'desktop-environment-lock-screen)
</pre>
</div>

<p>
Open web browser
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">run-firefox</span> ()
  (<span style="font-weight: bold;">interactive</span>)
  (efs/run-in-background <span style="font-style: italic;">"firefox"</span>))

(exwm-input-set-key (kbd <span style="font-style: italic;">"s-&lt;return&gt;"</span>) 'run-firefox)
</pre>
</div>
<p>
Lists all of my firefox tabs
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">list-firefox</span> ()
  (<span style="font-weight: bold;">interactive</span>)
  (<span style="font-weight: bold;">minibuffer-with-setup-hook</span>
      (<span style="font-weight: bold;">lambda</span> () (insert <span style="font-style: italic;">"firefox"</span>))
    (call-interactively #'ivy-switch-buffer)))

(exwm-input-set-key (kbd <span style="font-style: italic;">"s-f"</span>) #'list-firefox)
</pre>
</div>
<p>
Keybindings to switch the current workspace
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> exwm-input-global-keys
    `( ,@(mapcar (<span style="font-weight: bold;">lambda</span> (i)
                  `(,(kbd (format <span style="font-style: italic;">"s-%d"</span> i)) .
                    (<span style="font-weight: bold;">lambda</span> ()
                      (<span style="font-weight: bold;">interactive</span>)
                      (exwm-workspace-switch-create ,(- i 1)))))
                (number-sequence 1 9))))
</pre>
</div>
</div>
</div>
<div id="outline-container-org43219a5" class="outline-4">
<h4 id="org43219a5">Enable EXWM</h4>
<div class="outline-text-4" id="text-org43219a5">
<p>
I call <code>scratch-buffer</code> first so that each new workspace opens in a
scratch buffer.  The call to <code>exwm-enable</code> is what actually starts EXWM
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(scratch-buffer)
(exwm-wm-mode)
</pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="creator"><a href="https://www.gnu.org/software/emacs/">Emacs</a> 29.3 (<a href="https://orgmode.org">Org</a> mode 9.6.15)</p>
</div>
</body>
</html>
